---
apiVersion: external-secrets.io/v1alpha1
kind: ClusterSecretStore
metadata:
  name: vault-mattera-io
spec:
  provider:
    vault:
      server: "https://vault.mattera.io:8200"
      auth:
        appRole:
          roleId: 131a0100-7fdb-b5b4-e2de-5110c498df09
          secretRef:
            name: "vault-approle-external-secrets"
            key: "secret_id"
# CAN USE v1beta1 WHEN WEIRD ISSUE WITH CONVERSION IS GONE
# ---
# apiVersion: external-secrets.io/v1beta1
# kind: ClusterSecretStore
# metadata:
#   name: vault-mattera-io
# spec:
#   provider:
#     vault:
#       server: "https://vault.mattera.io:8200"
#       auth:
#         appRole:
#           roleRef:
#             name: "vault-approle-external-secrets"
#             key: "role_id"
#           secretRef:
#             name: "vault-approle-external-secrets"
#             key: "secret_id"
#   conditions:
#   - namespaceSelector:
#       matchLabels:
#         mattera.io/clustersecretstore: "true"
#   - namespaces:
#     - external-secrets
#     - flux-system
